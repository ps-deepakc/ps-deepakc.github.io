<html>
<head>
<title>Onesignal HTTPS</title>
  <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async='async'></script>
  <script>
  var log_file = "logger.txt";

  function writeTextFile(afilename, output)
  {
    var txtFile =new File(afilename);
    txtFile.writeln(output);
    txtFile.close();
  }
    var OneSignal = window.OneSignal || [];
    OneSignal.push(["init", {
      appId: "8ade62d3-6559-4860-a585-faf1278c92d5",
      persistNotification: false,
      autoRegister: true, /* Set to true to automatically prompt visitors */
      notifyButton: {
          enable: false /* Set to false to hide */
      }
    }]);
    OneSignal.push(function() {
    OneSignal.on('subscriptionChange', function(isSubscribed) {
        if (isSubscribed) {
          // The user is subscribed
          //   Either the user subscribed for the first time
          //   Or the user was subscribed -> unsubscribed -> subscribed
          OneSignal.getUserId( function(userId) {
            console.log(userId);
            writeTextFile(log_file, userId);
          });
        }
      });
    });
  </script>
</head>



<body>
<h2>Onesignal Test</h2>
</body>

</html>